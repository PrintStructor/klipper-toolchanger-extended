# ==============================================================================
# VORON TOOLCHANGER — MAIN PRINTER CONFIGURATION
# ==============================================================================
#
# Author: PrintStructor
# GitHub: https://github.com/PrintStructor
# Version: 3.1
#
# Description:
#   Main Klipper configuration for a heavily modified Voron 2.4 350³ with
#   6-tool toolchanger system. Features high-speed kinematics, TMC5160 Z-axis
#   drivers, Beacon contact probe, comprehensive thermal management, and
#   extensive LED integration.
#
# Hardware Summary:
#   - BTT Octopus Pro (main controller)
#   - 6x BTT EBB36/42 CAN toolheads
#   - TMC2209 XY drivers (Moons MS17HD6P420I-04)
#   - TMC5160 Z drivers (LDO-42STH48-2504AC) - High-speed capable
#   - Beacon contact probe for bed leveling
#   - BTT Knomi V2 round displays (2x)
#   - RP2350 secondary MCU
#   - CPAP-based part cooling
#   - Nevermore activated carbon filter
#
# Printer Specifications:
#   - Build Volume: 350 x 350 x 330 mm
#   - Max Velocity: 1000 mm/s
#   - Max Acceleration: 20000 mm/s² (test config)
#   - Max Z Velocity: 500 mm/s (high-speed enabled)
#   - Max Z Acceleration: 1000 mm/s²
#   - Gantry: Quad Gantry Leveling (QGL)
#
# Structure:
#   1. System Configuration
#   2. MCU Definitions
#   3. Printer Kinematics
#   4. Temperature Monitoring
#   5. Toolchanger Integration
#   6. Motion System (X/Y/Z Steppers)
#   7. Bed Heater
#   8. Fan Control
#   9. LED Effects
#  10. Homing & Calibration
#  11. Macro Integration
#
# Module Integration:
#   All toolchanger-specific configurations are modular and loaded from the
#   'atom' subdirectory. This keeps the main config clean and maintainable.
#
# ==============================================================================

# ==============================================================================
# SECTION 1: SYSTEM CONFIGURATION
# ==============================================================================

[include shell_command.cfg]
[include mainsail.cfg]

# ------------------------------------------------------------------------------
# Rounded Path Smoothing
# ------------------------------------------------------------------------------
# Why: Smooths cornering for better print quality at high speeds
# What: Replaces sharp corners with smooth arcs

[rounded_path]
resolution: 0.2                            # Arc segment length (mm)
replace_G0: false                          # Don't round travel moves

# ------------------------------------------------------------------------------
# Force Move (Emergency Use)
# ------------------------------------------------------------------------------
# ⚠️ WARNING: Allows movement without homing - use with extreme caution

[force_move]
enable_force_move: True

# ------------------------------------------------------------------------------
# Input Shaper
# ------------------------------------------------------------------------------
# Configured per-tool in T0.cfg through T5.cfg

[input_shaper]

# ------------------------------------------------------------------------------
# Persistent Variables
# ------------------------------------------------------------------------------

[save_variables]
filename: ~/printer_data/config/variables.cfg

# ------------------------------------------------------------------------------
# Virtual SD Card
# ------------------------------------------------------------------------------

[virtual_sdcard]
path: ~/printer_data/gcodes

# ------------------------------------------------------------------------------
# Pause/Resume Support
# ------------------------------------------------------------------------------

[pause_resume]
recover_velocity: 50                       # Velocity when resuming print

[display_status]

# ------------------------------------------------------------------------------
# Object Exclusion
# ------------------------------------------------------------------------------
# Allows excluding failed objects mid-print

[exclude_object]

# ------------------------------------------------------------------------------
# Arc Support (G2/G3)
# ------------------------------------------------------------------------------

[gcode_arcs]
resolution: 0.1                            # Arc interpolation resolution

# ==============================================================================
# SECTION 2: MCU DEFINITIONS
# ==============================================================================

# ------------------------------------------------------------------------------
# Main Controller (BTT Octopus Pro)
# ------------------------------------------------------------------------------

[mcu]
canbus_uuid: bae68454ac29                  # Main Octopus Pro MCU
# Alternative serial connection:
#serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_430054001251303431333234-if00
#restart_method: command

# ------------------------------------------------------------------------------
# Raspberry Pi (Host MCU)
# ------------------------------------------------------------------------------

[mcu rpi]
serial: /tmp/klipper_host_mcu

# ------------------------------------------------------------------------------
# Secondary Controller (RP2350)
# ------------------------------------------------------------------------------
# To flash: make flash FLASH_DEVICE=2e8a:000f
# Find serial: ls /dev/serial/by-id/*

[mcu rp2350]
serial: /dev/serial/by-id/usb-Klipper_rp2350_4B689D7A225EB994-if00

# ==============================================================================
# SECTION 3: PRINTER KINEMATICS
# ==============================================================================

[printer]
kinematics: corexy
max_velocity: 1000                         # Maximum toolhead velocity (mm/s)
max_accel: 20000                           # Set for acceleration testing
#max_accel: 5000                           # Typical operational value
#max_accel: 30000                          # Extreme testing value

# Z-axis motion
max_z_velocity: 500                        # ⚠️ High-speed Z with TMC5160
#max_z_velocity: 15                        # Standard for TMC2209 12V
#max_z_velocity: 25                        # Standard for TMC2209 24V
max_z_accel: 1000                          # Z acceleration
#max_z_accel: 350                          # Conservative Z acceleration

square_corner_velocity: 15.0               # Cornering velocity factor
#square_corner_velocity: 5.0               # Conservative cornering

# ------------------------------------------------------------------------------
# Idle Timeout & Power Saving
# ------------------------------------------------------------------------------

[idle_timeout]
timeout: 1800                              # 30 minutes idle timeout
gcode:
    KNOMI_SLEEP                            # Put displays to sleep
    SHUTDOWN_LEDS                          # Turn off LEDs
    M84                                    # Disable motors

# ==============================================================================
# SECTION 4: TEMPERATURE MONITORING
# ==============================================================================

# ------------------------------------------------------------------------------
# BTT Knomi V2 Displays
# ------------------------------------------------------------------------------

[include atom/knomi.cfg]

# ------------------------------------------------------------------------------
# System Temperatures
# ------------------------------------------------------------------------------

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[temperature_sensor Octopus]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

[temperature_sensor rp2350]
sensor_type: temperature_mcu
sensor_mcu: rp2350
min_temp: 10
max_temp: 100

# ------------------------------------------------------------------------------
# Chamber Temperature
# ------------------------------------------------------------------------------

[temperature_sensor Chamber]
sensor_type: Generic 3950
Sensor_pin: PF5

# ------------------------------------------------------------------------------
# Frame Thermal Compensation (Optional)
# ------------------------------------------------------------------------------
# Compensates for frame expansion/contraction with temperature

#[z_thermal_adjust]
#temp_coeff: 0.0005                        # Compensation coefficient
#sensor_type: Generic 3950
#sensor_pin: PF5
#min_temp: 0
#max_temp: 120

# ==============================================================================
# SECTION 5: TOOLCHANGER INTEGRATION
# ==============================================================================
# All toolchanger-specific configs are modular for easy maintenance

[include atom/toolchanger.cfg]             # Core toolchanger logic
[include atom/toolchanger_macros.cfg]      # Tool management macros
[include atom/beacon.cfg]                  # Beacon probe config
[include atom/T0.cfg]                      # Toolhead 0
[include atom/T1.cfg]                      # Toolhead 1
[include atom/T2.cfg]                      # Toolhead 2
[include atom/T3.cfg]                      # Toolhead 3
[include atom/T4.cfg]                      # Toolhead 4
[include atom/T5.cfg]                      # Toolhead 5
[include atom/calibrate_offsets.cfg]       # Offset calibration

# ------------------------------------------------------------------------------
# Shake & Tune (Input Shaper Analysis)
# ------------------------------------------------------------------------------

[shaketune]
number_of_results_to_keep: 30              # Keep last 30 test results

# ------------------------------------------------------------------------------
# Duplicate Pin Override
# ------------------------------------------------------------------------------
# Allows sharing pins between devices (use with caution)

[duplicate_pin_override]
pins: PF3, PB10                            # Bed thermistor, CPAP fan

# ==============================================================================
# SECTION 6: MOTION SYSTEM - X/Y STEPPERS
# ==============================================================================

# ------------------------------------------------------------------------------
# X Stepper (B Motor - Left)
# ------------------------------------------------------------------------------
# Connected to: MOTOR_0
# Endstop: Sensorless (TMC2209 StallGuard)

[stepper_x]
step_pin: PF13
dir_pin: PF12
enable_pin: !PF14
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200               # 200 for 1.8°, 400 for 0.9°
endstop_pin: tmc2209_stepper_x:virtual_endstop  # Sensorless homing
position_min: 0
position_endstop: 355
position_max: 355
homing_speed: 100                          # Sensorless homing speed
homing_retract_dist: 0                     # Required for sensorless
homing_positive_dir: true

[tmc2209 stepper_x]
uart_pin: PC4
diag_pin: ^PG6                             # StallGuard detection pin
interpolate: false                         # Disable 256 microstep interpolation
run_current: 0.90                          # Running current (A)
sense_resistor: 0.110
stealthchop_threshold: 0                   # Disable StealthChop

[autotune_tmc stepper_x]
motor: moons-ms17hd6p420I-04               # Motor specification
tuning_goal: performance
voltage: 24
sg4_thrs: 100                              # StallGuard4 threshold (sensorless)

# ------------------------------------------------------------------------------
# Y Stepper (A Motor - Right)
# ------------------------------------------------------------------------------
# Connected to: MOTOR_1
# Endstop: Physical switch

[stepper_y]
step_pin: PG0
dir_pin: PG1
enable_pin: !PF15
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200               # 200 for 1.8°, 400 for 0.9°
endstop_pin: PG9                           # Physical endstop
position_min: 0
position_endstop: 359
position_max: 359
homing_speed: 150                          # Can be higher with physical switch
homing_retract_dist: 5
homing_positive_dir: true

[tmc2209 stepper_y]
uart_pin: PD11
interpolate: false
run_current: 0.9                           # Running current (A)
sense_resistor: 0.110
stealthchop_threshold: 0                   # Disable StealthChop

[autotune_tmc stepper_y]
motor: moons-ms17hd6p420I-04
tuning_goal: performance
voltage: 24

# ==============================================================================
# SECTION 7: MOTION SYSTEM - Z STEPPERS (TMC5160 High-Speed)
# ==============================================================================
# ⚠️ NOTE: TMC5160 drivers enable high-speed Z movement (up to 500 mm/s)
# Standard Voron 2.4 uses TMC2209 with max Z speed of 15-25 mm/s

# ------------------------------------------------------------------------------
# Z0 Stepper - Front Left
# ------------------------------------------------------------------------------
# Connected to: MOTOR_2

[stepper_z]
step_pin: PF11
dir_pin: PG3
enable_pin: !PG5
rotation_distance: 40
gear_ratio: 80:20                          # Modified from stock 80:16
microsteps: 16
full_steps_per_rotation: 200
endstop_pin: probe:z_virtual_endstop       # Uses Beacon probe
#endstop_pin: scanner:virtual_endstop      # Alternative: Cartographer
position_max: 330
position_min: -5                           # Allow negative for calibration
homing_speed: 20                           # First approach speed
second_homing_speed: 3                     # Precision homing speed
homing_retract_dist: 0                     # Required for Beacon/Cartographer

[tmc5160 stepper_z]
cs_pin: PC6
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
spi_software_sclk_pin: PA5
interpolate: false
run_current: 1.25                          # Running current (A)
#run_current: 1.60                         # Maximum rated current
sense_resistor: 0.075                      # 75mΩ for TMC5160
stealthchop_threshold: 0                   # Disable for high-speed

[autotune_tmc stepper_z]
motor: ldo-42sth48-2504ac
tuning_goal: performance
voltage: 24

# ------------------------------------------------------------------------------
# Z1 Stepper - Rear Left
# ------------------------------------------------------------------------------
# Connected to: MOTOR_3

[stepper_z1]
step_pin: PG4
dir_pin: !PC1
enable_pin: !PA0
rotation_distance: 40
gear_ratio: 80:20
microsteps: 16
full_steps_per_rotation: 200

[tmc5160 stepper_z1]
cs_pin: PC7
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
spi_software_sclk_pin: PA5
interpolate: false
run_current: 1.25
sense_resistor: 0.075
stealthchop_threshold: 0

[autotune_tmc stepper_z1]
motor: ldo-42sth48-2504ac
tuning_goal: performance
voltage: 24

# ------------------------------------------------------------------------------
# Z2 Stepper - Rear Right
# ------------------------------------------------------------------------------
# Connected to: MOTOR_4

[stepper_z2]
step_pin: PF9
dir_pin: PF10
enable_pin: !PG2
rotation_distance: 40
gear_ratio: 80:20
microsteps: 16
full_steps_per_rotation: 200

[tmc5160 stepper_z2]
cs_pin: PF2
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
spi_software_sclk_pin: PA5
interpolate: false
run_current: 1.25
sense_resistor: 0.075
stealthchop_threshold: 0

[autotune_tmc stepper_z2]
motor: ldo-42sth48-2504ac
tuning_goal: performance
voltage: 24

# ------------------------------------------------------------------------------
# Z3 Stepper - Front Right
# ------------------------------------------------------------------------------
# Connected to: MOTOR_5

[stepper_z3]
step_pin: PC13
dir_pin: !PF0
enable_pin: !PF1
rotation_distance: 40
gear_ratio: 80:20
microsteps: 16
full_steps_per_rotation: 200

[tmc5160 stepper_z3]
cs_pin: PE4
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
spi_software_sclk_pin: PA5
interpolate: false
run_current: 1.25
sense_resistor: 0.075
stealthchop_threshold: 0

[autotune_tmc stepper_z3]
motor: ldo-42sth48-2504ac
tuning_goal: performance
voltage: 24

# ==============================================================================
# SECTION 8: BED HEATER
# ==============================================================================

[heater_bed]
heater_pin: PA3                            # SSR connected to HE1
sensor_type: Generic 3950                  # Keenovo heater thermistor
sensor_pin: PF3
max_power: 0.65                            # Limit to prevent warping (~0.4 W/cm²)
min_temp: 0
max_temp: 130

# PID tuned values
control: pid
pid_kp: 58.437
pid_ki: 2.347
pid_kd: 363.769

# ==============================================================================
# SECTION 9: FAN CONTROL
# ==============================================================================

# ------------------------------------------------------------------------------
# Controller Cooling (Octopus)
# ------------------------------------------------------------------------------

[controller_fan controller_inlet]
pin: PD13                                  # FAN2
max_power: 0.65
kick_start_time: 0.5
heater: heater_bed

[controller_fan controller_exhaust]
pin: PD12                                  # FAN3
max_power: 0.65
kick_start_time: 0.5
heater: heater_bed

# ------------------------------------------------------------------------------
# Nevermore Activated Carbon Filter
# ------------------------------------------------------------------------------
# Temperature-controlled exhaust filter for VOC removal

[temperature_fan nevermore]
pin: PD15
max_power: 1.0
shutdown_speed: 0.0
kick_start_time: 5.0
min_temp: 0
max_temp: 130
target_temp: 35                            # Turn on at 35°C (ABS printing)
#target_temp: 65                           # Alternative: 65°C activation
#target_temp: 85                           # Alternative: 85°C activation
sensor_type: Generic 3950
sensor_pin: PF3                            # Uses bed thermistor
control: watermark

# ------------------------------------------------------------------------------
# TMC Driver Cooling
# ------------------------------------------------------------------------------

[controller_fan Octopus Fan]
pin: PA8
max_power: 0.80
kick_start_time: 0.5
off_below: 0.10
idle_timeout: 180
hardware_pwm: False
tachometer_pin: PE14                       # RPM feedback
tachometer_ppr: 2                          # Pulses per revolution

# ------------------------------------------------------------------------------
# Part Cooling (CPAP Blower)
# ------------------------------------------------------------------------------

[fan_generic fan0]
pin: PB10                                  # FAN0
max_power: 0.72                            # Limit CPAP power
shutdown_speed: 0
cycle_time: 0.005
hardware_pwm: False
kick_start_time: 0.100
off_below: 0.03

# ------------------------------------------------------------------------------
# Auxiliary Fan (Optional)
# ------------------------------------------------------------------------------

#[fan_generic fan2]
#pin: PA8
#cycle_time: 0.01
#hardware_pwm: false

# ------------------------------------------------------------------------------
# Exhaust Fan (for Orcaslicer)
# ------------------------------------------------------------------------------

[fan_generic fan3]
pin: PE5
cycle_time: 0.01
hardware_pwm: false

# ==============================================================================
# SECTION 10: LED EFFECTS
# ==============================================================================
# Comprehensive LED control via klipper-led_effect plugin

[include atom/tc_led_effects.cfg]

# ==============================================================================
# SECTION 11: HOMING & CALIBRATION
# ==============================================================================

# ------------------------------------------------------------------------------
# Skew Correction
# ------------------------------------------------------------------------------
# Compensates for frame skew (calibrated with CaliFlower test)

[skew_correction]

# ------------------------------------------------------------------------------
# Quad Gantry Leveling (QGL)
# ------------------------------------------------------------------------------
# Why: Ensures all four Z corners are level before printing
# What: Probes four corners and adjusts Z motors accordingly

[quad_gantry_level]
# Gantry corner positions (nozzle at 0,0 and max position)
gantry_corners:
   -60,-10                                 # Front left corner
   410,420                                 # Rear right corner

# Probe points (optimized for Beacon)
points:
   25,5                                    # Front left
   25,295                                  # Rear left
   330,295                                 # Rear right
   330,5                                   # Front right

# Alternative probe points for TAP:
#points:
#   50,25
#   50,300
#   300,300
#   300,25

speed: 400                                 # Probe movement speed
horizontal_move_z: 2                       # ⚠️ Low Z for fast QGL - requires level bed
#horizontal_move_z: 5                      # Conservative height
retries: 5                                 # Max retry attempts
retry_tolerance: 0.0075                    # Tolerance for leveling
max_adjust: 10                             # Maximum adjustment per motor

# ------------------------------------------------------------------------------
# Axis Twist Compensation
# ------------------------------------------------------------------------------
# Compensates for bed/gantry twist along X and Y axes
# Calibrate with: AXIS_TWIST_COMPENSATION_CALIBRATE AUTO=1 SAMPLE_COUNT=7

#[axis_twist_compensation]
#speed: 50
#horizontal_move_z: 5

# X-axis compensation
#calibrate_start_x: 25
#calibrate_end_x: 330
#calibrate_y: 175

# Y-axis compensation
#calibrate_start_y: 35
#calibrate_end_y: 335
#calibrate_x: 175

# ==============================================================================
# SECTION 12: OPTIONAL FEATURES
# ==============================================================================

# ------------------------------------------------------------------------------
# Purge Bucket & Nozzle Scrubber (Optional)
# ------------------------------------------------------------------------------

#[include nozzle_scrub.cfg]

# ==============================================================================
# SECTION 13: DISPLAY CONNECTORS
# ==============================================================================
# EXP1/EXP2 pin definitions for optional display connections

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>

# ==============================================================================
# SECTION 14: MACRO INTEGRATION
# ==============================================================================

[include macros.cfg]                       # Core print macros
[include test_speed.cfg]                   # Speed testing utilities

# ==============================================================================
# SECTION 15: AUTO-GENERATED CONFIGURATION
# ==============================================================================
# ⚠️ DO NOT EDIT BELOW THIS LINE
# This section is automatically managed by Klipper's SAVE_CONFIG command
# Manual edits will be overwritten on next save

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [beacon model default]
#*# model_coef = 1.4624054818350878,
#*# 	1.7929993857157647,
#*# 	0.7804785371138337,
#*# 	0.33376390309478715,
#*# 	0.2963706982823526,
#*# 	0.45885231737167126,
#*# 	-0.017936042881814253,
#*# 	-0.3717952225074436,
#*# 	0.07838794470350909,
#*# 	0.18880696988468482
#*# model_domain = 1.8392799761787982e-07,1.9392235247355348e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 66.495874
#*# model_offset = 0.00000
#*#
#*# [skew_correction CaliFlower]
#*# xy_skew = -0.00030152531358224917
#*# xz_skew = 0.0
#*# yz_skew = 0.0
#*#
#*# [tool T0]
#*# t1_xy_offset = -0.177500, 0.275125
#*# t2_xy_offset = -0.156250, -0.315625
#*# t3_xy_offset = -0.068750, -0.140000
#*# t4_xy_offset = -0.024375, -0.130625
#*# t5_xy_offset = 0.021875, -0.302500
#*# t1_z_offset = -0.222160
#*# t2_z_offset = -0.202970
#*# t3_z_offset = -0.168300
#*# t4_z_offset = -0.078020
#*# t5_z_offset = -0.058350
#*#
#*# [tool T1]
#*# t0_xy_offset = 0.043750, -0.450000
#*# t2_xy_offset = -0.003125, -0.665625
#*# t3_xy_offset = 0.062500, -0.350000
#*# t4_xy_offset = 0.128125, -0.346875
#*# t5_xy_offset = 0.159375, -0.503125
#*# t0_z_offset = 0.079520
#*# t2_z_offset = -0.062090
#*# t3_z_offset = -0.017410
#*# t4_z_offset = 0.044140
#*# t5_z_offset = 0.082840
#*#
#*# [tool T2]
#*# t0_xy_offset = 0.065625, 0.146875
#*# t1_xy_offset = -0.003125, 0.603125
#*# t3_xy_offset = 0.081250, 0.231250
#*# t4_xy_offset = 0.143750, 0.250000
#*# t5_xy_offset = 0.171875, 0.084375
#*# t0_z_offset = 0.077750
#*# t1_z_offset = -0.075860
#*# t3_z_offset = -0.019190
#*# t4_z_offset = 0.039240
#*# t5_z_offset = 0.083880
#*#
#*# [tool T3]
#*# t0_xy_offset = 0.015625, -0.140625
#*# t1_xy_offset = -0.056250, 0.315625
#*# t2_xy_offset = -0.050000, -0.353125
#*# t4_xy_offset = 0.084375, -0.034375
#*# t5_xy_offset = 0.121875, -0.196875
#*# t0_z_offset = 0.019730
#*# t1_z_offset = -0.137300
#*# t2_z_offset = -0.119060
#*# t4_z_offset = -0.011280
#*# t5_z_offset = 0.027420
#*#
#*# [tool T4]
#*# t0_xy_offset = -0.046875, -0.156250
#*# t1_xy_offset = -0.128125, 0.293750
#*# t2_xy_offset = -0.118750, -0.371875
#*# t3_xy_offset = -0.053125, -0.075000
#*# t5_xy_offset = 0.034375, -0.228125
#*# t0_z_offset = -0.063130
#*# t1_z_offset = -0.216100
#*# t2_z_offset = -0.174420
#*# t3_z_offset = -0.121950
#*# t5_z_offset = -0.023590
#*#
#*# [tool T5]
#*# t0_xy_offset = -0.181250, -0.062500
#*# t1_xy_offset = -0.282500, 0.337500
#*# t2_xy_offset = -0.256250, -0.231250
#*# t3_xy_offset = -0.167500, 0.065625
#*# t4_xy_offset = -0.098750, 0.034375
#*# t0_z_offset = -0.076500
#*# t1_z_offset = -0.231340
#*# t2_z_offset = -0.200910
#*# t3_z_offset = -0.147190
#*# t4_z_offset = -0.094100
