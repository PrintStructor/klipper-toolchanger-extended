# ==============================================================================
# VORON TOOLCHANGER — LED EFFECTS CONFIGURATION
# ==============================================================================
#
# Author: PrintStructor
# GitHub: https://github.com/PrintStructor
# Version: 1.0.0
#
# Description:
#   Comprehensive LED effects system for 6-tool VORON toolchanger with:
#   - Individual toolhead LEDs (RGBW logo + RGB nozzle sequins)
#   - Chamber lighting with 64 addressable LEDs
#   - Status-driven visual feedback for all printer states
#   - Temperature visualization for bed and all extruders
#   - Automated startup and shutdown sequences
#
# Hardware Setup:
#   Each toolhead (T0-T5):
#     - LED 1: RGBW Neopixel (logo/status indicator)
#     - LED 2-3: RGB Sequins (nozzle illumination)
#   Chamber:
#     - 64x RGB Neopixels (full enclosure lighting)
#   RP2350 Board:
#     - 1x RGB status LED
#
# Requirements:
#   - Klipper LED Effects plugin installed
#   - Correct pin mappings for each MCU
#
# Structure:
#   1. Hardware Definitions (Neopixel strips)
#   2. Startup & Shutdown Effects
#   3. Base LED Effects (rainbow, error, homing)
#   4. Status LED Effects (busy, heating, cooling, printing, pause)
#   5. Temperature Visualization Effects
#   6. Completion & Part Ready Effects
#   7. Control Macros & Sequences
#
# Usage:
#   - STATUS_READY: Set to ready state (rainbow)
#   - STATUS_PRINTING TOOL=X: Set printing status for tool X
#   - STATUS_HEATING: Show heating visualization
#   - STATUS_PART_READY: Completion sequence
#
# ==============================================================================

# ==============================================================================
# SECTION 1: LED HARDWARE DEFINITIONS
# ==============================================================================

# ------------------------------------------------------------------------------
# Toolhead LED Strips (T0-T5)
# ------------------------------------------------------------------------------
# Each toolhead has 3 LEDs:
#   LED 1: RGBW Neopixel (logo/status indicator)
#   LED 2-3: RGB Sequins (nozzle illumination)

[neopixel et0_leds]
pin: et0:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

[neopixel et1_leds]
pin: et1:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

[neopixel et2_leds]
pin: et2:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

[neopixel et3_leds]
pin: et3:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

[neopixel et4_leds]
pin: et4:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

[neopixel et5_leds]
pin: et5:PD3
chain_count: 3
color_order: GRBW, GRB, GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0
#initial_WHITE: 0.0

# ------------------------------------------------------------------------------
# Chamber Lighting
# ------------------------------------------------------------------------------
[neopixel chamber_leds]
pin: rp2350:gpio16
chain_count: 64                             # Full strip of 64 addressable LEDs
color_order: GRB
#initial_RED: 1.0
#initial_GREEN: 0.0
#initial_BLUE: 1.0

# ------------------------------------------------------------------------------
# RP2350 Board Status LED
# ------------------------------------------------------------------------------
[neopixel rp2350_rgb]
pin: rp2350:gpio25
color_order: RGB
initial_RED: 1.0

# ==============================================================================
# SECTION 2: STARTUP & SHUTDOWN EFFECTS
# ==============================================================================

# ------------------------------------------------------------------------------
# Startup Knight Rider Animation
# ------------------------------------------------------------------------------
# Iconic bouncing light effect in chamber center during boot
[led_effect startup_knight_rider]
autostart: false
frame_rate: 24
leds:
    neopixel:chamber_leds (23-43)
layers:
    # green version
    #gradient 0.10 0.50 lighten (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,1.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    #gradient 0.10 -0.50 top (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,1.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    # red version
    #gradient 0.10 0.50 lighten (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(1.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    #gradient 0.10 -0.50 top (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(1.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    # test knightrider
    ##gradient 0.40 0.50 lighten (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(1.00,0.00,0.00),(0.00,0.00,0.00),(0.00,0.00,0.00),(0.00,0.00,0.00)
    ##gradient 0.40 -0.50 top (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(1.00,0.00,0.00),(0.00,0.00,0.00),(0.00,0.00,0.00),(0.00,0.00,0.00)
    # green version — reversed direction
    #gradient 0.10 -0.50 lighten (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,1.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    #gradient 0.10 0.50 top (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,1.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    # Pink / Cyan Knight Rider
    gradient 0.40 0.50 lighten (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(1.0,0.0,1.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)
    gradient 0.40 -0.50 top (0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,1.0,1.0),(0.0,0.0,0.0),(0.0,0.0,0.0),(0.0,0.0,0.0)

[led_effect startup_tools_pair1]
autostart: false
frame_rate: 24
leds:
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
layers:
    static 0 0 top (0.0,1.0,0.0)  # Green

[led_effect startup_tools_pair2]
autostart: false
frame_rate: 24
leds:
    neopixel:et1_leds (1)
    neopixel:et4_leds (1)
layers:
    static 0 0 top (0.0,1.0,1.0)  # Cyan

[led_effect startup_tools_pair3]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:et5_leds (1)
layers:
    static 0 0 top (0.0,0.0,1.0)  # Blue

[led_effect startup_tools_all]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
layers:
    gradient 0.1 1 add (0.0,1.0,0.0),(0.0,1.0,1.0),(0.0,0.0,1.0)  # Green → Cyan → Blue

# ==============================================================================
# SECTION 3: BASE LED EFFECTS
# ==============================================================================

# ------------------------------------------------------------------------------
# Nature Rainbow - Default Ready State
# ------------------------------------------------------------------------------
# Soothing rainbow gradient across all LEDs
[led_effect rainbow_nature]
leds:
    neopixel:et0_leds
    neopixel:et1_leds
    neopixel:et2_leds
    neopixel:et3_leds
    neopixel:et4_leds
    neopixel:et5_leds
    neopixel:chamber_leds
autostart: false
frame_rate: 12
layers:
    gradient 0.1 1 add (0.0,0.8,0.2),(0.0,1.0,0.4),(0.0,0.7,0.8),(0.0,0.4,1.0),(0.3,0.0,0.8),(0.5,0.0,0.5)

# ------------------------------------------------------------------------------
# Critical Error - Emergency State
# ------------------------------------------------------------------------------
# Bright red strobe + breathing effect for critical failures
# Triggered automatically by Klipper on error (run_on_error: true)
[led_effect critical_error]
leds:
    neopixel:et0_leds
    neopixel:et1_leds
    neopixel:et2_leds
    neopixel:et3_leds
    neopixel:et4_leds
    neopixel:et5_leds
    neopixel:chamber_leds
layers:
    strobe         1  1.5   add        (1.0,  1.0, 1.0)
    breathing      2  0     difference (0.95, 0.0, 0.0)
    static         1  0     top        (1.0,  0.0, 0.0)
autostart: false
frame_rate: 24
run_on_error: true

# ------------------------------------------------------------------------------
# Homing - Active Homing State
# ------------------------------------------------------------------------------
# Green flash synchronized with endstop triggers
[led_effect homing]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds
endstops: x,y,z,probe
layers:
    homing 5 0 top (0.0, 1.0, 0.0)

[led_effect sb_logo_homing]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe     1 1.5 add        (0.0, 0.6, 0.2)
    breathing  2 1   difference (0.0, 0.6, 0.2)
    static     1 0   top        (0.0, 0.6, 0.2)

# ==============================================================================
# SECTION 4: STATUS LED EFFECTS
# ==============================================================================

# ------------------------------------------------------------------------------
# Busy State
# ------------------------------------------------------------------------------
# Red breathing effect to indicate system is busy
# Available in tool-specific and global variants
[led_effect sb_logo_busy]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe     1 1.5 add        (0.6, 0.0, 0.0)
    breathing  2 1   difference (0.6, 0.0, 0.0)
    static     1 0   top        (0.6, 0.0, 0.0)

[led_effect sb_logo_busy_t0]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
layers:
    breathing  3 1 top (1,0,0)

[led_effect sb_logo_busy_t1]
autostart: false
frame_rate: 12
leds:
    neopixel:et1_leds (1)
layers:
    breathing  3 1 top (1,0,0)

[led_effect sb_logo_busy_t2]
autostart: false
frame_rate: 12
leds:
    neopixel:et2_leds (1)
layers:
    breathing  3 1 top (1,0,0)

[led_effect sb_logo_busy_t3]
autostart: false
frame_rate: 12
leds:
    neopixel:et3_leds (1)
layers:
    breathing  3 1 top (1,0,0)

[led_effect sb_logo_busy_t4]
autostart: false
frame_rate: 12
leds:
    neopixel:et4_leds (1)
layers:
    breathing  3 1 top (1,0,0)

[led_effect sb_logo_busy_t5]
autostart: false
frame_rate: 12
leds:
    neopixel:et5_leds (1)
layers:
    breathing  3 1 top (1,0,0)

# ------------------------------------------------------------------------------
# Heating State
# ------------------------------------------------------------------------------
# Orange strobe + breathing for heating operations
[led_effect heating_strobe]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds
layers:
    strobe     1 1.5 add        (0.6, 0.18, 0.0)
    breathing  2 1   difference (0.6, 0.18, 0.0)
    static     1 0   top        (0.6, 0.18, 0.0)

# ------------------------------------------------------------------------------
# Cooling State
# ------------------------------------------------------------------------------
# Blue strobe + breathing for cooling operations
[led_effect cooling_strobe]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds
layers:
    strobe     1 1.5 add        (0.0, 0.0, 0.6)
    breathing  2 1   difference (0.0, 0.0, 0.6)
    static     1 0   top        (0.0, 0.0, 0.6)

# ------------------------------------------------------------------------------
# Global Heating/Cooling Overlays
# ------------------------------------------------------------------------------
# Applied to nozzle LEDs and full chamber
[led_effect heating]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (2,3)
    neopixel:et1_leds (2,3)
    neopixel:et2_leds (2,3)
    neopixel:et3_leds (2,3)
    neopixel:et4_leds (2,3)
    neopixel:et5_leds (2,3)
    neopixel:chamber_leds (1-64)
layers:
    breathing  3 1 top (1.0, 0.18, 0.0, 0.0)

[led_effect cooling]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (2,3)
    neopixel:et1_leds (2,3)
    neopixel:et2_leds (2,3)
    neopixel:et3_leds (2,3)
    neopixel:et4_leds (2,3)
    neopixel:et5_leds (2,3)
    neopixel:chamber_leds (1-64)
layers:
    breathing  3 1 top (0.0, 0.0, 1.0, 0.1)

[led_effect leveling_strobe]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
layers:
    strobe     1 1.5 add        (0.5, 0.1, 0.6)
    breathing  2 1   difference (0.5, 0.1, 0.6)
    static     1 0   top        (0.5, 0.1, 0.6)

[led_effect meshing_strobe]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
layers:
    strobe     1 1.5 add        (0.2, 0.6, 0.0)
    breathing  2 1   difference (0.2, 0.6, 0.0)
    static     1 0   top        (0.2, 0.6, 0.0)

# ------------------------------------------------------------------------------
# Printing State
# ------------------------------------------------------------------------------
# Temperature-based color gradient for active printing
[led_effect sb_logo_printing]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
layers:
    gradient  0.3  1 add (0.3, 0.0, 0.0),(0.3, 0.3, 0.0),(0.3, 0.1, 0.0)

[led_effect sb_logo_printing_t0]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
heater: extruder
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect sb_logo_printing_t1]
autostart: false
frame_rate: 12
leds:
    neopixel:et1_leds (1)
heater: extruder1
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect sb_logo_printing_t2]
autostart: false
frame_rate: 12
leds:
    neopixel:et2_leds (1)
heater: extruder2
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect sb_logo_printing_t3]
autostart: false
frame_rate: 12
leds:
    neopixel:et3_leds (1)
heater: extruder3
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect sb_logo_printing_t4]
autostart: false
frame_rate: 12
leds:
    neopixel:et4_leds (1)
heater: extruder4
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect sb_logo_printing_t5]
autostart: false
frame_rate: 12
leds:
    neopixel:et5_leds (1)
heater: extruder5
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

# ------------------------------------------------------------------------------
# Other Status Effects
# ------------------------------------------------------------------------------
[led_effect sb_logo_cleaning]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe     1 1.5 add        (0.0, 0.02, 0.6)
    breathing  2 1   difference (0.0, 0.02, 0.6)
    static     1 0   top        (0.0, 0.02, 0.6)

[led_effect sb_logo_calibrating_z]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe     1 1.5 add        (0.0, 0.0, 0.6)
    breathing  2 1   difference (0.0, 0.0, 0.6)
    static     1 0   top        (0.0, 0.0, 0.6)

# ------------------------------------------------------------------------------
# Pause State
# ------------------------------------------------------------------------------
# Orange strobe + breathing to indicate paused print
# Per-tool implementations to show which tool was active
[led_effect sb_logo_pause_t0]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
heater: extruder
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)  # Orange strobe
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

[led_effect sb_logo_pause_t1]
autostart: false
frame_rate: 12
leds:
    neopixel:et1_leds (1)
heater: extruder1
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

[led_effect sb_logo_pause_t2]
autostart: false
frame_rate: 12
leds:
    neopixel:et2_leds (1)
heater: extruder2
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

[led_effect sb_logo_pause_t3]
autostart: false
frame_rate: 12
leds:
    neopixel:et3_leds (1)
heater: extruder3
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

[led_effect sb_logo_pause_t4]
autostart: false
frame_rate: 12
leds:
    neopixel:et4_leds (1)
heater: extruder4
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

[led_effect sb_logo_pause_t5]
autostart: false
frame_rate: 12
leds:
    neopixel:et5_leds (1)
heater: extruder5
layers:
    strobe 1 1.5 top        (1.0,  0.18, 0.0)
    breathing  2 1   difference (1.0,  0.18, 0.0)
    static     1 0   top        (1.0,  0.18, 0.0)

# ==============================================================================
# SECTION 5: TEMPERATURE VISUALIZATION EFFECTS
# ==============================================================================

# ------------------------------------------------------------------------------
# Bed Temperature Display
# ------------------------------------------------------------------------------
# Chamber center LEDs show bed temperature gradient (blue→orange→red)
[led_effect bed_temp_visualization]
autostart: false
frame_rate: 12
heater: heater_bed
leds:
    neopixel:chamber_leds (23-43)
layers:
    temperature 20 110 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

# ------------------------------------------------------------------------------
# Tool Status LED Temperature Display
# ------------------------------------------------------------------------------
# Logo LEDs show extruder temperature (blue→orange→red)
[led_effect status_temp_t0]
autostart: false
frame_rate: 12
heater: extruder
leds:
    neopixel:et0_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect status_temp_t1]
autostart: false
frame_rate: 12
heater: extruder1
leds:
    neopixel:et1_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect status_temp_t2]
autostart: false
frame_rate: 12
heater: extruder2
leds:
    neopixel:et2_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect status_temp_t3]
autostart: false
frame_rate: 12
heater: extruder3
leds:
    neopixel:et3_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect status_temp_t4]
autostart: false
frame_rate: 12
heater: extruder4
leds:
    neopixel:et4_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect status_temp_t5]
autostart: false
frame_rate: 12
heater: extruder5
leds:
    neopixel:et5_leds (1)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

# ------------------------------------------------------------------------------
# Tool Nozzle LED Temperature Display
# ------------------------------------------------------------------------------
# Nozzle sequins show extruder temperature (blue→orange→red)
[led_effect tool0_temp]
autostart: false
frame_rate: 12
heater: extruder
leds:
    neopixel:et0_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect tool1_temp]
autostart: false
frame_rate: 12
heater: extruder1
leds:
    neopixel:et1_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect tool2_temp]
autostart: false
frame_rate: 12
heater: extruder2
leds:
    neopixel:et2_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect tool3_temp]
autostart: false
frame_rate: 12
heater: extruder3
leds:
    neopixel:et3_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect tool4_temp]
autostart: false
frame_rate: 12
heater: extruder4
leds:
    neopixel:et4_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

[led_effect tool5_temp]
autostart: false
frame_rate: 12
heater: extruder5
leds:
    neopixel:et5_leds (2,3)
layers:
    temperature 20 260 top (0.0,0.0,1.0),(1.0,0.5,0.0),(1.0,0.0,0.0)

# ==============================================================================
# SECTION 6: COMPLETION & PART READY EFFECTS
# ==============================================================================

# ------------------------------------------------------------------------------
# Completion Effects
# ------------------------------------------------------------------------------
# Green strobe/breathing to celebrate successful print completion
[led_effect completion_blink]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t0]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t1]
autostart: false
frame_rate: 24
leds:
    neopixel:et1_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t2]
autostart: false
frame_rate: 24
leds:
    neopixel:et2_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t3]
autostart: false
frame_rate: 24
leds:
    neopixel:et3_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t4]
autostart: false
frame_rate: 24
leds:
    neopixel:et4_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect completion_blink_t5]
autostart: false
frame_rate: 24
leds:
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    strobe 1 0.5 top (0.0, 1.0, 0.0)

[led_effect sb_logo_part_ready]
autostart: false
frame_rate: 12
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
    neopixel:chamber_leds (23-43)
layers:
    breathing  3 1 top (0.0, 1.0, 0.0)

# ------------------------------------------------------------------------------
# Shutdown Effect
# ------------------------------------------------------------------------------
[led_effect shutdown_tools_all]
autostart: false
frame_rate: 24
leds:
    neopixel:et0_leds (1)
    neopixel:et1_leds (1)
    neopixel:et2_leds (1)
    neopixel:et3_leds (1)
    neopixel:et4_leds (1)
    neopixel:et5_leds (1)
layers:
    gradient 0.1 1 add (0.0,1.0,0.0),(0.0,1.0,1.0),(0.0,0.0,1.0)

# ------------------------------------------------------------------------------
# Static Lighting Helpers
# ------------------------------------------------------------------------------
# Fixed white lighting for work area illumination
[led_effect set_nozzle_leds]
leds:
    neopixel:et0_leds (2,3)
    neopixel:et1_leds (2,3)
    neopixel:et2_leds (2,3)
    neopixel:et3_leds (2,3)
    neopixel:et4_leds (2,3)
    neopixel:et5_leds (2,3)
autostart: false
frame_rate: 1
layers:
    static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_chamber_leds_partial]
leds:
    neopixel:chamber_leds (1-22)
    neopixel:chamber_leds (44-64)
autostart: false
frame_rate: 1
layers:
    static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_chamber_leds_partial_dimmed]
leds:
    neopixel:chamber_leds (1-22)
    neopixel:chamber_leds (44-64)
autostart: false
frame_rate: 1
layers:
    static 0 0 top (0.3, 0.3, 0.3)

[led_effect set_chamber_leds_full]
leds:
    neopixel:chamber_leds (1-64)
autostart: false
frame_rate: 1
layers:
    static 0 0 top (1.0, 1.0, 1.0)

# ==============================================================================
# SECTION 7: CONTROL MACROS & SEQUENCES
# ==============================================================================

# ------------------------------------------------------------------------------
# Utility Macros
# ------------------------------------------------------------------------------
[gcode_macro CANCEL_ALL_DELAYED]
gcode:
    UPDATE_DELAYED_GCODE ID=PART_READY_TEMP_FADE DURATION=0
    UPDATE_DELAYED_GCODE ID=PART_READY_TO_READY DURATION=0
    UPDATE_DELAYED_GCODE ID=startup_to_ready DURATION=0

# ------------------------------------------------------------------------------
# Status Control Macros
# ------------------------------------------------------------------------------
# Main user-facing macros for controlling LED states
[gcode_macro STATUS_OFF]
description: Turn off all LED effects
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

[gcode_macro STATUS_READY]
description: Set LEDs to ready state (nature rainbow)
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=rainbow_nature

[gcode_macro STATUS_BUSY]
description: Set LEDs to busy state with optional tool selection
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    {% if TOOL >= 0 and TOOL <= 5 %}
        SET_LED_EFFECT EFFECT=sb_logo_busy_t{TOOL}
    {% else %}
        SET_LED_EFFECT EFFECT=sb_logo_busy
    {% endif %}
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

[gcode_macro STATUS_HEATING]
description: Set LEDs to heating state
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Strobe overlay for status LEDs and chamber
    SET_LED_EFFECT EFFECT=heating_strobe

    # Bed temperature in chamber center
    SET_LED_EFFECT EFFECT=bed_temp_visualization

    # Chamber LEDs (partial white)
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

    # Nozzle LEDs show tool temperature
    {% if TOOL >= 0 and TOOL <= 5 %}
        SET_LED_EFFECT EFFECT=tool{TOOL}_temp
    {% else %}
        SET_LED_EFFECT EFFECT=tool0_temp
        SET_LED_EFFECT EFFECT=tool1_temp
        SET_LED_EFFECT EFFECT=tool2_temp
        SET_LED_EFFECT EFFECT=tool3_temp
        SET_LED_EFFECT EFFECT=tool4_temp
        SET_LED_EFFECT EFFECT=tool5_temp
    {% endif %}

[gcode_macro STATUS_COOLING]
description: Set LEDs to cooling state
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Strobe overlay for status LEDs and chamber
    SET_LED_EFFECT EFFECT=cooling_strobe

    # Bed temperature in chamber center
    SET_LED_EFFECT EFFECT=bed_temp_visualization

    # Chamber LEDs (partial white)
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

    # Nozzle LEDs show tool temperature
    {% if TOOL >= 0 and TOOL <= 5 %}
        SET_LED_EFFECT EFFECT=tool{TOOL}_temp
    {% else %}
        SET_LED_EFFECT EFFECT=tool0_temp
        SET_LED_EFFECT EFFECT=tool1_temp
        SET_LED_EFFECT EFFECT=tool2_temp
        SET_LED_EFFECT EFFECT=tool3_temp
        SET_LED_EFFECT EFFECT=tool4_temp
        SET_LED_EFFECT EFFECT=tool5_temp
    {% endif %}

[gcode_macro STATUS_LEVELING]
description: Set LEDs to leveling state
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Status LEDs blink
    SET_LED_EFFECT EFFECT=leveling_strobe

    # Nozzle LEDs white
    SET_LED_EFFECT EFFECT=set_nozzle_leds

    # Chamber partial white
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

    # Bed temperature in the front center
    SET_LED_EFFECT EFFECT=bed_temp_visualization

[gcode_macro STATUS_MESHING]
description: Set LEDs to meshing state
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Status LEDs blink
    SET_LED_EFFECT EFFECT=meshing_strobe

    # Nozzle LEDs white
    SET_LED_EFFECT EFFECT=set_nozzle_leds

    # Chamber partial white
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

    # Bed temperature in the front center
    SET_LED_EFFECT EFFECT=bed_temp_visualization

[gcode_macro STATUS_PRINTING]
description: Set LEDs to printing state with optional tool selection
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Bed temperature in the front chamber row
    SET_LED_EFFECT EFFECT=bed_temp_visualization

    # Tool-specific overlays
    {% if TOOL >= 0 and TOOL <= 5 %}
        # Status LED shows tool temperature
        SET_LED_EFFECT EFFECT=status_temp_t{TOOL}
        # Nozzle LEDs white
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% else %}
        # All status LEDs show their respective temperature
        SET_LED_EFFECT EFFECT=sb_logo_printing_t0
        SET_LED_EFFECT EFFECT=sb_logo_printing_t1
        SET_LED_EFFECT EFFECT=sb_logo_printing_t2
        SET_LED_EFFECT EFFECT=sb_logo_printing_t3
        SET_LED_EFFECT EFFECT=sb_logo_printing_t4
        SET_LED_EFFECT EFFECT=sb_logo_printing_t5
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% endif %}

    # Side chamber LEDs white
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

[gcode_macro STATUS_CLEANING]
description: Set LEDs to cleaning state
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=sb_logo_cleaning
    SET_LED_EFFECT EFFECT=set_nozzle_leds
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

[gcode_macro STATUS_CALIBRATING_Z]
description: Set LEDs to Z calibration state
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
    SET_LED_EFFECT EFFECT=set_nozzle_leds
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

[gcode_macro STATUS_HOMING]
description: Set LEDs to homing state
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=homing
    SET_LED_EFFECT EFFECT=sb_logo_homing

    {% if TOOL >= 0 and TOOL <= 5 %}
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% else %}
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% endif %}

    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

# ------------------------------------------------------------------------------
# Pause Status Control
# ------------------------------------------------------------------------------
[gcode_macro STATUS_PAUSE]
description: Set LEDs to pause state with optional tool selection
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS

    # Bed temperature in the front chamber row
    SET_LED_EFFECT EFFECT=bed_temp_visualization

    # Tool-specific overlays
    {% if TOOL >= 0 and TOOL <= 5 %}
        # Status LED shows paused state (orange blinking)
        SET_LED_EFFECT EFFECT=sb_logo_pause_t{TOOL}
        # Nozzle LEDs white
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% else %}
        # All status LEDs show paused state
        SET_LED_EFFECT EFFECT=sb_logo_pause_t0
        SET_LED_EFFECT EFFECT=sb_logo_pause_t1
        SET_LED_EFFECT EFFECT=sb_logo_pause_t2
        SET_LED_EFFECT EFFECT=sb_logo_pause_t3
        SET_LED_EFFECT EFFECT=sb_logo_pause_t4
        SET_LED_EFFECT EFFECT=sb_logo_pause_t5
        SET_LED_EFFECT EFFECT=set_nozzle_leds
    {% endif %}

    # Side chamber LEDs white
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial

# ------------------------------------------------------------------------------
# Temperature Visualization Control
# ------------------------------------------------------------------------------
[gcode_macro SET_TEMP_VISUALIZATION]
description: Enable temperature visualization for specific tool(s)
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=bed_temp_visualization
    {% if TOOL >= 0 and TOOL <= 5 %}
        SET_LED_EFFECT EFFECT=tool{TOOL}_temp
    {% endif %}

# ------------------------------------------------------------------------------
# Part Ready Sequence
# ------------------------------------------------------------------------------
# Multi-stage animation with delayed transitions:
#   1. Green blink celebration (15s)
#   2. Fade to temperature display (10s fade)
#   3. Hold temperature display (900s = 15min)
#   4. Return to ready state (15s fade)
[gcode_macro STATUS_PART_READY]
description: Start part-ready sequence with temperature display
variable_tool: -1
gcode:
    {% set TOOL = params.TOOL|default(-1)|int %}
    SET_GCODE_VARIABLE MACRO=STATUS_PART_READY VARIABLE=tool VALUE={TOOL}
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    # Start with green blink and white chamber LEDs
    SET_LED_EFFECT EFFECT=completion_blink
    #SET_LED_EFFECT EFFECT=sb_logo_part_ready
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial
    SET_LED_EFFECT EFFECT=set_nozzle_leds
    UPDATE_DELAYED_GCODE ID=PART_READY_TEMP_FADE DURATION=15

[delayed_gcode PART_READY_TEMP_FADE]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=completion_blink STOP=1 FADETIME=10.0
    #SET_LED_EFFECT EFFECT=sb_logo_part_ready STOP=1 FADETIME=10.0
    SET_LED_EFFECT EFFECT=bed_temp_visualization FADETIME=10.0
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial STOP=1 FADETIME=10.0
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial_dimmed FADETIME=10.0

    # Temperature display for all tools
    SET_LED_EFFECT EFFECT=sb_logo_printing_t0 FADETIME=10.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t1 FADETIME=10.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t2 FADETIME=10.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t3 FADETIME=10.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t4 FADETIME=10.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t5 FADETIME=10.0
    SET_LED_EFFECT EFFECT=set_nozzle_leds FADETIME=10.0

    UPDATE_DELAYED_GCODE ID=PART_READY_TO_READY DURATION=900

[delayed_gcode PART_READY_TO_READY]
initial_duration: 0
gcode:
    # Fade out all current effects
    SET_LED_EFFECT EFFECT=bed_temp_visualization STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=set_chamber_leds_partial_dimmed STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t0 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t1 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t2 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t3 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t4 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=sb_logo_printing_t5 STOP=1 FADETIME=15.0
    SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1 FADETIME=15.0

    # Fade in rainbow nature effect
    SET_LED_EFFECT EFFECT=rainbow_nature FADETIME=15.0

# ------------------------------------------------------------------------------
# Startup Sequence
# ------------------------------------------------------------------------------
# Choreographed boot animation:
#   1. Knight Rider chamber effect
#   2. Sequential tool pair illumination (T2/T3 → T1/T4 → T0/T5)
#   3. Final gradient fade to ready state
[delayed_gcode startup_sequence]
initial_duration: 1
gcode:
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=startup_knight_rider
    SET_LED_EFFECT EFFECT=startup_tools_pair1 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_pair1_off DURATION=2.0

[delayed_gcode startup_pair1_off]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_pair1 STOP=1 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_pair2 DURATION=1.5  # Longer pause

[delayed_gcode startup_pair2]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_pair2 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_pair2_off DURATION=2.0

[delayed_gcode startup_pair2_off]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_pair2 STOP=1 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_pair3 DURATION=1.5  # Longer pause

[delayed_gcode startup_pair3]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_pair3 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_pair3_off DURATION=2.0

[delayed_gcode startup_pair3_off]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_pair3 STOP=1 FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_tools_all DURATION=1.5  # Longer pause

[delayed_gcode startup_tools_all]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_tools_all FADETIME=1
    UPDATE_DELAYED_GCODE ID=startup_to_ready DURATION=1

[delayed_gcode startup_to_ready]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=startup_knight_rider STOP=1 FADETIME=7.0
    SET_LED_EFFECT EFFECT=startup_tools_all STOP=1 FADETIME=7.0
    SET_LED_EFFECT EFFECT=rainbow_nature FADETIME=7.0

[gcode_macro SHUTDOWN_LEDS]
description: Graceful LED shutdown sequence
gcode:
    SET_LED_EFFECT EFFECT=rainbow_nature STOP=1 FADETIME=5.0
    SET_LED_EFFECT EFFECT=shutdown_tools_all FADETIME=5.0
    UPDATE_DELAYED_GCODE ID=FINAL_SHUTDOWN DURATION=7

[delayed_gcode FINAL_SHUTDOWN]
initial_duration: 0
gcode:
    SET_LED_EFFECT EFFECT=shutdown_tools_all STOP=1 FADETIME=3.0

[gcode_macro WAKE_UP]
description: Restart the startup LED sequence to wake the printer from sleep mode
gcode:
    STOP_LED_EFFECTS
    UPDATE_DELAYED_GCODE ID=startup_sequence DURATION=1

# ------------------------------------------------------------------------------
# Error State - Toolchanger / Critical Error
# ------------------------------------------------------------------------------
[gcode_macro STATUS_ERROR]
description: Set LEDs to error state (red flashing)
gcode:
    CANCEL_ALL_DELAYED
    STOP_LED_EFFECTS
    SET_LED_EFFECT EFFECT=critical_error

